# SPDX-License-Identifier: GPL-2.0-only OR BSD-2-Clause
%YAML 1.2
---
$id: http://devicetree.org/schemas/leds/lacie,netxbig-leds.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: CPLD LEDs (GPIO extension bus) found on some LaCie/Seagate

maintainers:
  - Andrew Lunn <andrew@lunn.ch>

properties:
  compatible:
    const: lacie,netxbig-leds

  gpio-ext:
    description:
      Phandle for the gpio-ext bus
    $ref: /schemas/types.yaml#/definitions/phandle

  timers:
    description:
      Timer array. Each timer entry is represented by three integers
      Mode (gpio-ext bus), delay_on and delay_off.
    $ref: /schemas/types.yaml#/definitions/uint32-array

patternProperties:
  "^.*-.*$":
    type: object
    $ref: common.yaml#

    properties:
      mode-addr:
        $ref: /schemas/types.yaml#/definitions/uint32-array
        description:
          Mode register address on gpio-ext bus.

      mode-val:
        $ref: /schemas/types.yaml#/definitions/uint32-array
        description:
          Mode to value mapping. Each entry is represented by two integers
          A mode and the corresponding value on the gpio-ext bus.

      bright-addr:
        $ref: /schemas/types.yaml#/definitions/uint32
        description:
          Brightness register address on gpio-ext bus.

      max-brightness:
        $ref: /schemas/types.yaml#/definitions/uint32

    additionalProperties: false

    required:
      - mode-addr
      - mode-val
      - bright-addr
      - max-brightness

additionalProperties: false

required:
  - compatible
  - gpio-ext

examples:
  - |
    #include <dt-bindings/gpio/gpio.h>
    #include <dt-bindings/leds/leds-netxbig.h>

    netxbig_gpio_ext: netxbig-gpio-ext {
        compatible = "lacie,netxbig-gpio-ext";

        addr-gpios = <&gpio1 15 GPIO_ACTIVE_HIGH
                      &gpio1 16 GPIO_ACTIVE_HIGH
                      &gpio1 17 GPIO_ACTIVE_HIGH>;
        data-gpios = <&gpio1 12 GPIO_ACTIVE_HIGH
                      &gpio1 13 GPIO_ACTIVE_HIGH
                      &gpio1 14 GPIO_ACTIVE_HIGH>;
        enable-gpio = <&gpio0 29 GPIO_ACTIVE_HIGH>;
    };

    netxbig-leds {
        compatible = "lacie,netxbig-leds";

        gpio-ext = <&netxbig_gpio_ext>;
        timers = <NETXBIG_LED_TIMER1 500 500
                  NETXBIG_LED_TIMER2 500 1000>;

        blue-power {
                label = "netxbig:blue:power";
                mode-addr = <0>;
                mode-val = <NETXBIG_LED_OFF 0
                            NETXBIG_LED_ON 1
                            NETXBIG_LED_TIMER1 3
                            NETXBIG_LED_TIMER2 7>;
                bright-addr = <1>;
                max-brightness = <7>;
        };
    };
...
