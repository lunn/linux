# SPDX-License-Identifier: GPL-2.0
%YAML 1.2
---
$id: http://devicetree.org/schemas/watchdog/marvell,orion-wdt.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Marvell Orion Watchdog Device Tree Bindings

allOf:
  - $ref: "watchdog.yaml#"

maintainers:
  - Andrew Lunn <andrew@lunn.ch>

properties:
  compatible:
    enum:
      - marvell,orion-wdt
      - marvell,armada-370-wdt
      - marvell,armada-xp-wdt
      - marvell,armada-375-wdt
      - marvell,armada-380-wdt

  reg:
    description:
      Normally two items, the timer control address and the rstout enable
      address. However armada-375 and 380 require and additional shared
      mask/unmask rstout address

  clocks:
    minItems: 1
    items:
      - description: L2/coherency fabric clock
      - description: Reference 25 MHz fixed-clock

  interrupts:
    maxItems: 1

  timeout-sec: true

required:
  - compatible
  - reg
  - clocks
  - interrupts

if:
  properties:
    compatible:
      contains:
        enum:
          - marvell,armada-xp-wdt
          - marvell,armada-375-wdt
          - marvell,armada-380-wdt
then:
  properties:
    clocks:
      minItems: 2
    clock-names:
      items:
        - const: nbclk
        - const: fixed

  required:
    - clock-names

else:
  properties:
    clocks:
      maxItems: 1

unevaluatedProperties: false

examples:
  - |
    watchdog@20300 {
        compatible = "marvell,orion-wdt";
        reg = <0x20300 0x28>, <0x20108 0x4>;
        interrupts = <3>;
        timeout-sec = <10>;
        clocks = <&gate_clk 7>;
    };
...
