# SPDX-License-Identifier: GPL-2.0-only OR BSD-2-Clause
%YAML 1.2
---
$id: http://devicetree.org/schemas/pinctrl/marvell,98dx4122-pinctrl.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Marvell 98dx4122 pin controller

maintainers:
  - Andrew Lunn <andrew@lunn.ch>

description:
  Bindings for Marvell's 98DX4122 memory-mapped pin controller.

properties:
  compatible:
    items:
      - const: marvell,98dx4122-pinctrl

  reg:
    maxItems: 1

patternProperties:
  '^pmx-':
    type: object

    properties:
      marvell,function:
        $ref: "/schemas/types.yaml#/definitions/string"
        description:
          Indicates the function to select.
        enum: [ gpio, gpo, nand, pex, spi, sysrst, twsi0, uart0, uart1 ]

      marvell,pins:
        $ref: /schemas/types.yaml#/definitions/string-array
        description:
          Array of MPP pins to be used for the given function.
        minItems: 1
        items:
          pattern: '^mpp([0-9]|[1-3][0-9]|4[0-4])$'

    required:
      - marvell,function
      - marvell,pins

  additionalProperties: false

allOf:
  - $ref: "pinctrl.yaml#"

required:
  - compatible
  - reg

additionalProperties: false

examples:
  - |
    pinctrl@80020100 {
      compatible = "marvell,88f6180-pinctrl";
      reg = <0x80020100 0x20>;

      pmx_spi: pmx-spidc {
        marvell,pins = "mpp0", "mpp1", "mpp2", "mpp3";
        marvell,function = "spi";
      };

      pmx_spi_gpio: pmx-gpio-spi {
        marvell,pins = "mpp26", "mpp27";
        marvell,function = "gpio";
      };
    };
