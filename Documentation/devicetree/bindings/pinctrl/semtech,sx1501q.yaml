# SPDX-License-Identifier: GPL-2.0-only OR BSD-2-Clause
%YAML 1.2
---
$id: http://devicetree.org/schemas/pinctrl/semtech,sx1501q.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: SEMTECH SX150x GPIO expander

maintainers:
  - Andrew Lunn <andrew@lunn.ch>

properties:
  compatible:
    enum:
      - semtech,sx1501q
      - semtech,sx1502q
      - semtech,sx1503q
      - semtech,sx1504q
      - semtech,sx1505q
      - semtech,sx1506q
      - semtech,sx1507q
      - semtech,sx1508q
      - semtech,sx1509q

  reg:
    description:
      I2C slave address of this device

  '#gpio-cells':
    const: 2
    description: |
      The first cell is the GPIO number and the second cell is used
      to specify optional parameters: bit 0: polarity (0: normal, 1:
      inverted)

  gpio-controller: true

  interrupts:
    description:
      Interrupt specifier for the controllers interrupt.
    maxItems: 1

  interrupt-controller: true

  '#interrupt-cells':
    description:
      Specifies the PIN numbers and Flags, as defined in defined in
      include/dt-bindings/interrupt-controller/irq.h
    const: 2

  semtech,probe-reset:
    type: boolean
    description:
      Will trigger a reset of the GPIO expander on probe,
      only for sx1507q, sx1508q and sx1509q

required:
  - compatible
  - reg
  - '#gpio-cells'

patternProperties:
  "^cfg-":
    $ref: pincfg-node.yaml#

    properties:
      pins:
        description:
          A list of pins to configure in certain ways, such as enabling
          debouncing
        items:
          pattern: "^gpio1?[0-9]{1,2}$"

additionalProperties: false

examples:
  - |
    i2c {
        #address-cells = <1>;
        #size-cells = <0>;

        pinctrl@20 {
            #gpio-cells = <2>;
            #interrupt-cells = <2>;
            compatible = "semtech,sx1506q";
            reg = <0x20>;
            interrupt-parent = <&gpio_1>;
            interrupts = <16 0>;

            gpio-controller;
            interrupt-controller;

            pinctrl-names = "default";
            pinctrl-0 = <&gpio1_cfg_pins>;

            gpio1_cfg_pins: cfg- {
                pins = "gpio1";
                bias-pull-up;
            };
        };
    };
...
